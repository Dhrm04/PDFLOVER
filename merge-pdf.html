<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Merge PDF - PDFLOVERS</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins&display=swap">
  <link rel="stylesheet" href="mergestyle.css">
</head>
<body>

  <nav class="navbar">
    <div class="logo">PDFLOVERS</div>
    <ul class="nav-links">
      <li><a href="index.html">Home</a></li>
      <li><a href="merge.html" class="active">Merge PDF</a></li>
      <li><a href="edit.html">Edit PDF</a></li>
      <li><a href="about.html">About</a></li>
    </ul>
  </nav>

  <h1>Merge PDF files</h1>
  <p class="description">Combine your PDFs in the order you want with the fastest and easiest tool from PDFLOVERS.</p>

  <div class="upload-area">
    <label for="pdfFiles" class="custom-btn">üìÅ Select PDF files</label>
    <input type="file" id="pdfFiles" accept="application/pdf" multiple>
    <p class="note">or drop PDFs here</p>
    <button class="custom-btn" onclick="mergePDFs()">Merge PDF</button>
    <div id="output"></div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf-lib/1.17.1/pdf-lib.min.js"></script>
  <script>
    const fileInput = document.getElementById('pdfFiles');
    const output = document.getElementById('output');

    fileInput.addEventListener('change', () => {
      const files = fileInput.files;
      if (files.length > 1) {
        output.style.color = "green";
        output.textContent = `‚úÖ ${files.length} files selected.`;
      } else if (files.length === 1) {
        output.style.color = "red";
        output.textContent = '‚ö†Ô∏è Please select at least 2 PDF files.';
      } else {
        output.textContent = '';
      }
    });

    async function mergePDFs() {
      const files = fileInput.files;
      output.textContent = '';

      if (files.length < 2) {
        output.style.color = "red";
        output.textContent = '‚ö†Ô∏è Please select at least 2 PDF files.';
        return;
      }

      const mergedPdf = await PDFLib.PDFDocument.create();

      for (let file of files) {
        const bytes = await file.arrayBuffer();
        const pdf = await PDFLib.PDFDocument.load(bytes);
        const copiedPages = await mergedPdf.copyPages(pdf, pdf.getPageIndices());
        copiedPages.forEach((page) => mergedPdf.addPage(page));
      }

      const mergedPdfFile = await mergedPdf.save();
      const blob = new Blob([mergedPdfFile], { type: 'application/pdf' });

      const link = document.createElement('a');
      link.href = URL.createObjectURL(blob);
      link.download = 'merged.pdf';
      link.click();

      output.style.color = "green";
      output.textContent = '‚úÖ PDF files merged successfully!';
    }
  </script>
</body>
</html>
